"use strict";!function(){var e=angular.module("myApp",["ngRoute","sn.skrollr","ng.picturefill","ngAnimate","ui.bootstrap","myApp.version"]).config(["snSkrollrProvider",function(e){e.config={smoothScrolling:!0}}]);e.run(["snSkrollr",function(e){e.init(),console.log("in init ")}]),e.config(["$routeProvider",function(e){e.when("/homePage",{templateUrl:"Views/homePage.html",json:"json/home.json",controller:"homeController"}).when("/ourMission",{templateUrl:"Views/mission.html",json:"json/mission.json",controller:"ourMissionController"}).when("/achievements",{templateUrl:"Views/achievements.html",json:"json/achievements.json",controller:"achievementsController"}).when("/whoWeAre",{templateUrl:"Views/whoWeAre.html",json:"json/whoWeAre.json",controller:"whoWeAreController"}).when("/myanmar",{templateUrl:"Views/myanmar.html",json:"json/myanmar.json",controller:"aboutMyanmarController"}).when("/donate",{templateUrl:"Views/donate.html",json:"json/donate.json",controller:"donationController"}).when("/contact",{templateUrl:"Views/contact.html",json:"json/contact.json",controller:"contactUsController"}).when("/blog",{templateUrl:"Views/blogNow.html",controller:"blogController",json:"json/blogNow.json"}).when("/globalNav",{templateUrl:"Navigation/bandedNavTemplate.html",controller:"bandedNavControl",json:"json/globalNav.json"}).otherwise({redirectTo:"/homePage"})}])}(),function(){angular.module("myApp").factory("getJsonService",["$http","$q",function(e,t){return{retrieveJson:function(r){var n=t.defer();return e.get(r).then(function(e){console.log("in the service: "+e),n.resolve(e)}),n.promise}}}]),angular.module("myApp").filter("trustUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}])}(),function(){var e=angular.module("myApp");e.controller("homeController",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){var r=t.data;e.topBand=r.topBand,e.carousel=t.data.carousel,e.interval=5e3,e.noWrapSlides=!1,e.left=t.data.topicGrid.leftBlock,e.grid=t.data.topicGrid.rightBlock})}]),e.controller("ourMissionController",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){var r=t.data;e.topBand=r.topBand;var n=r.bgImage;e.images=[];for(var o=0;o<n.images.length;o++)0==o?e.defImage=n.images[o]:e.images.push(n.images[o]);var a=r.midComponent;e.infoSection=a.infoSection,e.video=a.video;var i=a.rightBlock;e.top=i.top,e.links=i.links,e.care=i.care})}]),e.controller("achievementsController",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){var r=t.data;e.topBand=r.topBand;var n=r.bgImage;e.images=[];for(var o=0;o<n.images.length;o++)0==o?e.defImage=n.images[o]:e.images.push(n.images[o]);var a=r.midComponent;e.infoSection=a.infoSection,e.video=a.video;var i=r.rightBlock;e.top=i.top,e.links=i.links,e.care=i.care})}]),e.controller("whoWeAreController",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){var r=t.data;e.title=r.gridMembers.title,e.description=r.gridMembers.description;var n=r.gridMembers.memberArray,o=n.length;e.batches=[];for(var a=[],i=0;o>i;i++)3===a.length?(e.batches.push(a),a=[],a.push(n[i]),i===o-1&&e.batches.push(a)):(a.push(n[i]),i===o-1&&e.batches.push(a));e.otherMembers=r.otherMembers.memberArray,e.otherMembersTitle=r.otherMembers.otherMembersTitle,e.friendsArray=r.friends.friendsArray,e.ourFriendsTitle=r.friends.ourFriendsTitle,e.top=r.gridMembers.rightBlock.top,e.links=r.gridMembers.rightBlock.links,e.care=r.gridMembers.rightBlock.care})}]),e.controller("aboutMyanmarController",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){var r=t.data;e.topBand=r.topBand;var n=r.bgImage;e.images=[];for(var o=0;o<n.images.length;o++)0==o?e.defImage=n.images[o]:e.images.push(n.images[o]);var a=r.midComponent;e.infoSection=a.infoSection,e.video=a.video,e.image=a.image;var i=r.rightBlock;e.top=i.top,e.links=i.links,e.care=i.care})}]),e.controller("contactUsController",["$scope","$http","$route","getJsonService",function(e,t,r,n){var o=r.current.$$route.json;n.retrieveJson(o).then(function(r){var n=r.data;e.topBand=n.topBand;var o=n.bgImage;e.images=[];for(var a=0;a<o.images.length;a++)0==a?e.defImage=o.images[a]:e.images.push(o.images[a]);e.directions=n.directions,e.alternate=n.alternate,e.company=n.company,e.street=n.street,e.cityState=n.cityState,e.tempDirections=n.tempDirections,e.sendMail=function(){n={name:this.name,email:this.email,message:this.message},t({method:"POST",url:"/contactForm",data:n}).then(function(e){console.log("Success in submission")},function(e){console.log("there was an error in submission")})},e.name="",e.email="";var i=n.rightBlock;e.top=i.top,e.links=i.links,e.care=i.care})}]),e.controller("donationController",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){var r=t.data;e.topBand=r.topBand;var n=r.bgImage;e.images=[];for(var o=0;o<n.images.length;o++)0==o?e.defImage=n.images[o]:e.images.push(n.images[o]);e.info=r.info,e.message=r.donateOptions.message;var a=r.donateOptions.options,i=a.length;e.batches=[];for(var s=[],o=0;i>o;o++)4===s.length?(e.batches.push(s),s=[],s.push(a[o]),o===i-1&&e.batches.push(s)):(s.push(a[o]),o===i-1&&e.batches.push(s));var l=r.alternateOption;e.alternateMessage=l.alternateMessage,e.company=l.company;var c=l.streetNo,m=l.streetName,u=l.city,p=l.state,d=l.zip;e.street=c+" "+m,e.locale=u+", "+p+" "+d,e.downloadMessage=l.downloadMessage;var g=r.rightBlock;e.top=g.top,e.links=g.links,e.care=g.care})}]),e.controller("blogController",["$scope","$route","$window","getJsonService",function(e,t,r,n){var o=t.current.$$route.json;n.retrieveJson(o).then(function(t){var n=t.data;n.images;e.TopTitle=n.blogTopMessage,e.images=[],e.allPosts=n.posts;var o=e.allPosts.length;e.totalItems=o,e.currentPage=1,e.numPerPage=2,e.pages=[];for(var a=0;o>a;a+=2){var i=[];i.push(e.allPosts[a]),i.push(e.allPosts[a+1]),e.pages.push(i)}e.posts=e.pages[0],e.pageChanged=function(){e.currentPage=this.currentPage},e.$watch("currentPage",function(){e.posts=e.pages[e.currentPage-1],r.scrollTo(0,0)}),e.maxSize=3;var s=n.rightBlock;e.top=s.top,e.links=s.links,e.care=s.care})}])}(),function(){angular.module("myApp").controller("bandedNavControl",["$scope","$route","getJsonService",function(e,t,r){var n=t.current.$$route.json;r.retrieveJson(n).then(function(t){e.tabs=t.data.menu,e.dTabs=t.data.menu,e.logo=t.data.logo})}])}(),function(){var e=angular.module("myApp");e.directive("clickTab",function(){return{link:function(e,t){t.bind("click",function(){t.toggleClass("open")})}}}),e.directive("clickNav",function(){function e(e,t,r){e.page="home",t.bind("click",function(e){var r=t.text().trim(),n=t.parent().parent().parent().parent().find("li");n.removeClass("active");for(var o in n){var a=Number(o),i=isNaN(a);if(!i){var s=n[a],l=s.innerText.trim();if(l===r){var c=s.attributes["class"].nodeValue;s.className="active "+c}}}})}return{link:e}}),e.directive("globalNavTabs",function(){return{restrict:"EA",transclude:!0,scope:{},controller:["$scope","$route","$window","getJsonService",function(e,t,r,n){var o="./json/globalNav.json";n.retrieveJson(o).then(function(t){switch(e.tabs=t.data.menu,e.dTabs=t.data.menu,e.logo=t.data.logo,e.currentPage=location.href.substring(location.href.lastIndexOf("/")+1),e.currentPage){case"home":e.setActive=0;break;case"ourMission":e.setActive=1;break;case"achievements":e.setActive=2;break;case"whoWeAre":e.setActive=3;break;case"now":e.setActive=4;break;case"myanmar":e.setActive=5;break;case"contact":e.setActive=6;break;case"donate":e.setActive=7;break;default:e.setActive=0}})}],templateUrl:"./Navigation/bandedNavTemplate.html"}}),e.directive("footerSection",function(){return{restrict:"EA",transclude:!0,scope:{},controller:["$rootScope","$scope","$route","getJsonService",function(e,t,r,n){var o="./json/footer.json";n.retrieveJson(o).then(function(e){t.info=e.data})}],templateUrl:"./templates/footer.html"}}),e.directive("band",function(){return{restrict:"E",transclude:!0,template:'<div class="band container" ng-transclude>',replace:!0}}),e.directive("topBand",function(){return{restrict:"E",transclude:!0,template:'<div class="top-band container"><div class="box-overlay"></div><div class="box-text">{{topBand.overlay}}</div><div ng-transclude></div> </div>',replace:!0}}),e.directive("careCarousel",function(){return{restrict:"E",transclude:!0,templateUrl:"./templates/carousel.html"}}),e.directive("topicGrid",function(){return{restrict:"E",transclude:!0,templateUrl:"./templates/topicGrid.html"}}),e.directive("midComponent",function(){return{restrict:"E",templateUrl:"./templates/midComponent.html"}}),e.directive("teamGridComponent",function(){return{restrict:"E",templateUrl:"./templates/teamGridComponent.html"}}),e.directive("teamMemberComponent",function(){return{restrict:"E",templateUrl:"./templates/teamMemberComponent.html"}}),e.directive("rightBlockModule",function(){return{restrict:"E",templateUrl:"./templates/rightBlockModule.html"}}),e.directive("ourFriends",function(){return{restrict:"E",templateUrl:"./templates/ourFriends.html"}}),e.directive("carouselClick",function(){return{link:function(e,t){t.bind("click",function(){e.interval=-1})}}}),e.directive("donateInfo",function(){return{restrict:"E",templateUrl:"./templates/donateInfo.html"}}),e.directive("donateOptions",function(){return{restrict:"E",templateUrl:"./templates/donateOptions.html"}}),e.directive("alternateOption",function(){return{restrict:"E",templateUrl:"./templates/alternateOption.html"}}),e.directive("contactComponent",function(){return{restrict:"E",templateUrl:"./templates/contactComponent.html"}}),e.directive("bgImage",function(){return{restrict:"E",transclude:!0,templateUrl:"./templates/bgImage.html"}}),e.directive("blogHeader",function(){return{restrict:"E",transclude:!0,templateUrl:"./templates/blogHeader.html"}}),e.directive("blogComponent",function(){return{restrict:"E",transclude:!0,templateUrl:"./templates/blogComponent.html"}}),e.directive("visualMedia",function(){return{restrict:"E",transclude:!0,templateUrl:"./templates/visualMedia.html"}})}();